<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bamboo Garden Waiter</title>
    <link rel="shortcut icon" href="bg_img.PNG" type="image/x-icon" />
    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Animate.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <!-- Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bamboo-green: #4a7c59;
        --bamboo-light: #8fbc8f;
        --bamboo-dark: #2d4a35;
        --accent-gold: #ffd700;
        --bg-primary: #f8fffe;
        --shadow-light: 0 4px 20px rgba(74, 124, 89, 0.1);
        --shadow-medium: 0 8px 30px rgba(74, 124, 89, 0.15);
        --gradient-green: linear-gradient(135deg, #4a7c59 0%, #8fbc8f 100%);
        --cake-pink: #e91e63;
        --cake-light: #f8bbd9;
        --gradient-pink: linear-gradient(135deg, #e91e63 0%, #f8bbd9 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: var(--bg-primary);
        font-family: "Inter", sans-serif;
        line-height: 1.6;
        color: #2c3e50;
        background-image: radial-gradient(
            circle at 20% 80%,
            rgba(74, 124, 89, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(143, 188, 143, 0.05) 0%,
            transparent 50%
          );
      }

      .navbar {
        background: var(--gradient-green) !important;
        box-shadow: var(--shadow-medium);
        padding: 1rem 0;
        backdrop-filter: blur(10px);
      }

      .navbar-brand {
        font-weight: 700;
        color: white !important;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .navbar-brand::before {
        content: "ğŸ¼";
        font-size: 2rem;
      }

      .nav-link {
        color: rgba(255, 255, 255, 0.9) !important;
        font-weight: 500;
        transition: all 0.3s ease;
        padding: 0.75rem 1.25rem !important;
        border-radius: 25px;
        margin: 0 0.25rem;
      }

      .nav-link:hover,
      .nav-link.active {
        color: white !important;
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
      }

      .dashboard-header {
        background: var(--gradient-green);
        color: white;
        padding: 2rem 0;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
      }

      .dashboard-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M0,0 C20,20 40,0 60,20 C80,40 100,20 100,40 L100,100 L0,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
        background-size: 100px 100px;
      }

      .dashboard-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        position: relative;
        z-index: 2;
      }

      .dashboard-subtitle {
        font-size: 1.1rem;
        opacity: 0.9;
        position: relative;
        z-index: 2;
      }

      .customer-info {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        box-shadow: var(--shadow-light);
        margin-bottom: 2rem;
        border: 1px solid rgba(74, 124, 89, 0.1);
      }

      .customer-info label {
        font-weight: 600;
        color: var(--bamboo-dark);
        margin-bottom: 0.5rem;
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .form-control, .form-select {
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 1rem 1.5rem;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        background-color: #f8f9fa;
      }

      .form-control:focus, .form-select:focus {
        border-color: var(--bamboo-green);
        box-shadow: 0 0 0 0.2rem rgba(74, 124, 89, 0.25);
        background-color: white;
      }

      .menu-type-selector {
        background: white;
        border-radius: 20px;
        padding: 1rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-light);
        display: flex;
        gap: 1rem;
        justify-content: center;
      }

      .menu-type-btn {
        padding: 1rem 2rem;
        border: none;
        background: transparent;
        border-radius: 15px;
        font-weight: 600;
        transition: all 0.3s ease;
        color: #6c757d;
        cursor: pointer;
        flex: 1;
        max-width: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .menu-type-btn.active.food-menu {
        background: var(--gradient-green);
        color: white;
        box-shadow: var(--shadow-light);
        transform: translateY(-2px);
      }

      .menu-type-btn.active.cake-menu {
        background: var(--gradient-pink);
        color: white;
        box-shadow: var(--shadow-light);
        transform: translateY(-2px);
      }

      .menu-type-btn:hover:not(.active) {
        background: rgba(74, 124, 89, 0.1);
        color: var(--bamboo-dark);
      }

      .section-title {
        font-size: 2rem;
        font-weight: 700;
        color: var(--bamboo-dark);
        margin-bottom: 2rem;
        position: relative;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .section-title.food::after {
        content: "";
        flex: 1;
        height: 3px;
        background: var(--gradient-green);
        border-radius: 2px;
        margin-left: 1rem;
      }

      .section-title.cake::after {
        content: "";
        flex: 1;
        height: 3px;
        background: var(--gradient-pink);
        border-radius: 2px;
        margin-left: 1rem;
      }

      .menu-categories {
        background: white;
        border-radius: 20px;
        padding: 1rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-light);
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .category-tab {
        padding: 0.75rem 1.5rem;
        border: none;
        background: transparent;
        border-radius: 25px;
        font-weight: 600;
        transition: all 0.3s ease;
        color: #6c757d;
        cursor: pointer;
        flex: 1;
        min-width: 120px;
        max-width: 200px;
      }

      .category-tab.active.food-category {
        background: var(--gradient-green);
        color: white;
        box-shadow: var(--shadow-light);
        transform: translateY(-2px);
      }

      .category-tab.active.cake-category {
        background: var(--gradient-pink);
        color: white;
        box-shadow: var(--shadow-light);
        transform: translateY(-2px);
      }

      .category-tab:hover:not(.active) {
        background: rgba(74, 124, 89, 0.1);
        color: var(--bamboo-dark);
      }

      .menu-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .food-item-card {
        background: white;
        border-radius: 20px;
        box-shadow: var(--shadow-light);
        padding: 1.5rem;
        transition: all 0.3s ease;
        border: 1px solid rgba(74, 124, 89, 0.1);
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        min-height: 100%;
        height: 100%;
      }

      .food-item-card.food-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-green);
      }

      .food-item-card.cake-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-pink);
      }

      .food-item-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-medium);
      }

      .item-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
      }

      .item-info {
        flex: 1;
      }

      .item-name {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--bamboo-dark);
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .item-price {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--bamboo-green);
      }

      .cake-item .item-price {
        color: var(--cake-pink);
      }

      .item-controls {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 1rem;
      }

      .qty-btn {
        width: 40px;
        height: 40px;
        border: 2px solid var(--bamboo-green);
        background: white;
        color: var(--bamboo-green);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.2rem;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .cake-item .qty-btn {
        border-color: var(--cake-pink);
        color: var(--cake-pink);
      }

      .qty-btn:hover:not(:disabled) {
        background: var(--bamboo-green);
        color: white;
        transform: scale(1.1);
      }

      .cake-item .qty-btn:hover:not(:disabled) {
        background: var(--cake-pink);
        color: white;
      }

      .qty-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .qty-display {
        background: var(--bamboo-light);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-weight: 600;
        min-width: 60px;
        text-align: center;
      }

      .cake-item .qty-display {
        background: var(--cake-light);
        color: var(--cake-pink);
      }

      .order-summary {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        box-shadow: var(--shadow-light);
        border: 1px solid rgba(74, 124, 89, 0.1);
        position: sticky;
        top: 2rem;
      }

      .summary-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--bamboo-dark);
      }

      .order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
        border-bottom: 1px solid #f1f3f4;
      }

      .order-item:last-child {
        border-bottom: none;
      }

      .order-item-name {
        font-weight: 500;
        color: var(--bamboo-dark);
        flex: 1;
      }

      .order-item-qty {
        background: var(--bamboo-light);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.9rem;
        font-weight: 600;
        margin: 0 1rem;
      }

      .order-item-price {
        font-weight: 700;
        color: var(--bamboo-green);
      }

      .order-total {
        background: var(--gradient-green);
        color: white;
        padding: 1.5rem;
        border-radius: 15px;
        text-align: center;
        font-size: 1.3rem;
        font-weight: 700;
        margin: 1.5rem 0;
        box-shadow: var(--shadow-light);
      }

      .submit-btn {
        background: var(--gradient-green);
        border: none;
        color: white;
        padding: 1rem 2rem;
        border-radius: 25px;
        font-weight: 600;
        font-size: 1.1rem;
        width: 100%;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-light);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .submit-btn:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
        color: white;
      }

      .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .empty-cart {
        text-align: center;
        color: #6c757d;
        padding: 2rem 0;
      }

      .empty-cart-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        opacity: 0.5;
      }

      .bamboo-decoration {
        position: fixed;
        bottom: 20px;
        right: 20px;
        font-size: 3rem;
        opacity: 0.3;
        z-index: 1;
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .search-box {
        background: white;
        border-radius: 15px;
        padding: 1rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-light);
      }

      .search-input {
        border: 2px solid #e9ecef;
        border-radius: 12px;
        padding: 0.75rem 1rem;
        font-size: 1rem;
        transition: all 0.3s ease;
        width: 100%;
      }

      .search-input:focus {
        border-color: var(--bamboo-green);
        box-shadow: 0 0 0 0.2rem rgba(74, 124, 89, 0.25);
        outline: none;
      }

      .weight-selector {
        background: rgba(233, 30, 99, 0.1);
        border-radius: 10px;
        padding: 0.75rem;
        margin-top: 0.5rem;
        margin-bottom: 1rem;
      }

      .weight-option {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
      }

      .weight-option:last-child {
        margin-bottom: 0;
      }

      .weight-option input[type="radio"] {
        margin: 0;
      }

      .weight-option label {
        margin: 0;
        font-size: 0.9rem;
        cursor: pointer;
      }

      .cake-add-controls {
        justify-content: center;
        margin-top: 1rem;
      }

      .cake-add-btn {
        background: var(--gradient-pink);
        border: none;
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-light);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        white-space: nowrap;
        gap: 0.5rem;
        min-width: 120px;
        max-width: 220px;
      }

      .cake-add-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
        background: linear-gradient(135deg, #c2185b 0%, #e91e63 100%);
      }

      .cake-add-btn:active {
        transform: translateY(0);
      }

      @media (max-width: 992px) {
        .cake-add-btn {
          min-width: 100px;
          max-width: 100%;
          font-size: 0.98rem;
          padding: 0.7rem 1rem;
        }
        .menu-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      @media (max-width: 768px) {
        .cake-add-btn {
          min-width: 80px;
          max-width: 100%;
          font-size: 0.95rem;
          padding: 0.65rem 0.5rem;
          border-radius: 18px;
          white-space: normal;
          text-align: center;
        }
        .item-controls.cake-add-controls {
          padding-left: 0;
          padding-right: 0;
        }
        .menu-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 576px) {
        .cake-add-btn {
          font-size: 0.92rem;
          padding: 0.6rem 0.3rem;
          min-width: 60px;
          max-width: 100%;
          border-radius: 14px;
          word-break: break-word;
        }
        .menu-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
        }
      }

      .order-type-display {
        background: rgba(74, 124, 89, 0.1);
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--bamboo-dark);
        margin-left: 0.5rem;
      }

      .cake-type {
        background: rgba(233, 30, 99, 0.1);
        color: var(--cake-pink);
      }
    </style>
  </head>
  <body>
    <div class="dashboard-header">
      <div class="container">
        <h1 class="dashboard-title">ğŸ½ï¸ Waiter Dashboard</h1>
        <p class="dashboard-subtitle">
          Take orders and manage table service with ease
        </p>
      </div>
    </div>

    <div class="container animate__animated animate__fadeInUp">
      <!-- Customer Information -->
      <div class="customer-info">
        <div class="row">
          <div class="col-md-4">
            <label for="customerName" class="form-label">
              <i class="bi bi-person"></i>
              Customer Name
            </label>
            <input type="text" class="form-control" id="customerName" placeholder="Enter customer name">
          </div>
          <div class="col-md-4">
            <label for="customerPhone" class="form-label">
              <i class="bi bi-telephone"></i>
              Phone Number
            </label>
            <input type="tel" class="form-control" id="customerPhone" placeholder="Enter phone number">
          </div>
          <div class="col-md-4">
            <label for="tableSelect" class="form-label">
              <i class="bi bi-table"></i>
              Table Number
            </label>
            <select class="form-select" id="tableSelect">
              <option selected disabled>Choose a table number</option>
              <option value="1">Table 1</option>
              <option value="2">Table 2</option>
              <option value="3">Table 3</option>
              <option value="4">Table 4</option>
              <option value="5">Table 5</option>
              <option value="6">Table 6</option>
              <option value="7">Table 7</option>
              <option value="8">Table 8</option>
              <option value="9">Table 9</option>
              <option value="10">Table 10</option>
              <option value="11">Table 11</option>
              <option value="12">Table 12</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Menu Type Selector -->
      <div class="menu-type-selector">
        <button class="menu-type-btn active food-menu" data-menu="food">
          <i class="bi bi-bowl-hot"></i>
          Food Menu
        </button>
        <button class="menu-type-btn cake-menu" data-menu="cake">
          <i class="bi bi-cake2"></i>
          Cakes & Desserts
        </button>
      </div>

      <div class="row">
        <!-- Menu Section -->
        <div class="col-lg-8">
          <!-- Food Menu Section -->
          <div id="foodMenuSection">
            <h2 class="section-title food">
              <i class="bi bi-journal-bookmark"></i>
              Food Menu
            </h2>

            <!-- Search Box -->
            <div class="search-box">
              <input
                type="text"
                class="search-input"
                placeholder="ğŸ” Search for dishes..."
                id="searchInput"
              />
            </div>

            <!-- Category Tabs -->
            <div class="menu-categories" id="foodCategories">
              <button
                class="category-tab active food-category"
                data-category="all"
              >
                All Items
              </button>
              <button class="category-tab food-category" data-category="salads">
                Salads
              </button>
              <button class="category-tab food-category" data-category="soups">
                Soups
              </button>
              <button
                class="category-tab food-category"
                data-category="Veg_Starters"
              >
                Veg Starters
              </button>
              <button
                class="category-tab food-category"
                data-category="Chicken_Starters"
              >
                Chicken Starters
              </button>
              <button
                class="category-tab food-category"
                data-category="Seafood_Starters"
              >
                Seafood Starters
              </button>
              <button
                class="category-tab food-category"
                data-category="Bamboo_Specials"
              >
                Bamboo Specials
              </button>
              <button
                class="category-tab food-category"
                data-category="Thupka_Bowls"
              >
                Thupka And Ching Mai Bowls
              </button>
              <button
                class="category-tab food-category"
                data-category="Continental_Fusion"
              >
                Continental And Fusion
              </button>
              <button class="category-tab food-category" data-category="pizza">
                Pizza
              </button>
              <button class="category-tab food-category" data-category="pasta">
                Pasta
              </button>
              <button class="category-tab food-category" data-category="wings">
                Wings
              </button>
              <button
                class="category-tab food-category"
                data-category="milkshakes"
              >
                Milk Shakes
              </button>
              <button
                class="category-tab food-category"
                data-category="mojitos"
              >
                Mojitos
              </button>
              <button class="category-tab food-category" data-category="momos">
                Momos(Veg)
              </button>
              <button
                class="category-tab food-category"
                data-category="NonVeg_Momos"
              >
                Momos(Non-Veg)
              </button>
              <button
                class="category-tab food-category"
                data-category="Fried_Rice_And_Noodles"
              >
                Fried Rice And Noodles
              </button>
            </div>

            <!-- Food Menu Items Grid -->
            <div class="menu-grid" id="foodMenuGrid">
              <!-- Food menu items will be populated here -->
            </div>
          </div>

          <!-- Cake Menu Section -->
          <div id="cakeMenuSection" style="display: none">
            <h2 class="section-title cake">
              <i class="bi bi-cake2"></i>
              Cakes & Desserts
            </h2>

            <!-- Search Box for Cakes -->
            <div class="search-box">
              <input
                type="text"
                class="search-input"
                placeholder="ğŸ” Search for cakes..."
                id="cakeSearchInput"
              />
            </div>

            <!-- Cake Category Tabs -->
            <div class="menu-categories" id="cakeCategories">
              <button
                class="category-tab active cake-category"
                data-cake-category="all"
              >
                All Cakes
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="freshCreamCakes"
              >
                Fresh Cream
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="bonBonExoticFlavours"
              >
                Exotic Flavours
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="dryCakes"
              >
                Dry Cakes
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="cheeseCakes"
              >
                Cheese Cakes
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="extras"
              >
                Extras
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="cakePieces"
              >
                cake Pieces
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="cupCakes"
              >
                Cup Cakes
              </button>
              <button
                class="category-tab cake-category"
                data-cake-category="specialsWithIceCream"
              >
                Specials With Ice Cream
              </button>
            </div>

            <!-- Cake Menu Items Grid -->
            <div class="menu-grid" id="cakeMenuGrid">
              <!-- Cake menu items will be populated here -->
            </div>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="col-lg-4">
          <h2 class="section-title">
            <i class="bi bi-cart3"></i>
            Order Summary
          </h2>
          <div class="order-summary">
            <div class="summary-header">
              <i class="bi bi-receipt"></i>
              Current Order
            </div>
            <div id="orderItems">
              <div class="empty-cart">
                <div class="empty-cart-icon">ğŸ›’</div>
                <p>No items added yet</p>
                <small>Start adding items to create an order</small>
              </div>
            </div>
            <button class="submit-btn" id="submitOrder" disabled>
              <i class="bi bi-send me-2"></i>Submit Order
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="bamboo-decoration">ğŸ‹</div>

    <!-- Success Toast -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
      <div
        id="orderToast"
        class="toast align-items-center text-white bg-success border-0"
        role="alert"
      >
        <div class="d-flex">
          <div class="toast-body">
            <i class="bi bi-check-circle-fill me-2"></i>Order submitted
            successfully!
          </div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            data-bs-dismiss="toast"
          ></button>
        </div>
      </div>
    </div>

    <!-- Add Firebase SDKs before your script -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Real Bamboo Garden Menu Data
      const menu = {
        salads: [
          { name: "Arabian Chicken Salad", price: 160, icon: "ğŸ¥—" },
          { name: "Bombay Chicken Salad", price: 160, icon: "ğŸ¥—" },
          { name: "Chinese Kimchi", price: 90, icon: "ğŸ¥—" },
          { name: "Creamy Coleslaw", price: 120, icon: "ğŸ¥—" },
        ],

        soups: [
          { name: "Thai Lemon Basil Soup (Veg)", price: 90, icon: "ğŸœ" },
          { name: "Thai Lemon Basil Soup (Chicken)", price: 120, icon: "ğŸœ" },
          { name: "Tom Yum Soup (Veg)", price: 90, icon: "ğŸœ" },
          { name: "Tom Yum Soup (Chicken)", price: 120, icon: "ğŸœ" },
          { name: "Bamboo Soup (Veg)", price: 90, icon: "ğŸœ" },
          { name: "Bamboo Soup (Chicken)", price: 120, icon: "ğŸœ" },
          { name: "Creamy Chicken Soup", price: 120, icon: "ğŸœ" },
          { name: "Creamy Mushroom Soup", price: 90, icon: "ğŸœ" },
          { name: "Cream Of Broccoli", price: 120, icon: "ğŸ¥¦" },
          { name: "Mexican Tortilla Soup Chicken", price: 140, icon: "ğŸ²" },
        ],

        Veg_Starters: [
          { name: "Chilly Mushroom", price: 160, icon: "ğŸ—" },
          { name: "Chilly Gobi", price: 140, icon: "ğŸ—" },
          { name: "Chilly Baby Corn", price: 180, icon: "ğŸ—" },
          { name: "Chilly Paneer", price: 180, icon: "ğŸ—" },
          { name: "Mushroom Manchurian", price: 160, icon: "ğŸ—" },
          { name: "Gobi Manchurian", price: 140, icon: "ğŸ—" },
          { name: "Baby Corn Manchurian", price: 180, icon: "ğŸ—" },
          { name: "Paneer Manchurian", price: 180, icon: "ğŸ—" },
          { name: "Mushroom Salt And Pepper", price: 160, icon: "ğŸ—" },
          { name: "Gobi Salt And Pepper", price: 140, icon: "ğŸ—" },
          { name: "Baby Corn Salt And Pepper", price: 180, icon: "ğŸ—" },
          { name: "Paneer Salt And Pepper", price: 180, icon: "ğŸ—" },
          { name: "Honey Chilli Sesame Mushroom", price: 160, icon: "ğŸ—" },
          { name: "Honey Chilli Sesame Gobi", price: 140, icon: "ğŸ—" },
          { name: "Honey Chilli Sesame Baby Corn", price: 180, icon: "ğŸ—" },
          { name: "Honey Chilli Sesame Paneer", price: 180, icon: "ğŸ—" },
          { name: "Crispy Chilli Garlic Mushroom", price: 160, icon: "ğŸ—" },
          { name: "Crispy Chilli Garlic Gobi", price: 140, icon: "ğŸ—" },
          { name: "Crispy Chilli Garlic Baby Corn", price: 180, icon: "ğŸ—" },
          { name: "Crispy Chilli Garlic Paneer", price: 180, icon: "ğŸ—" },
          { name: "Schezwan Mushroom", price: 160, icon: "ğŸ—" },
          { name: "Schezwan Gobi", price: 140, icon: "ğŸ—" },
          { name: "Schezwan Baby Corn", price: 180, icon: "ğŸ—" },
          { name: "Schezwan Paneer", price: 180, icon: "ğŸ—" },
          { name: "Mushroom Madras Pepper Fry", price: 160, icon: "ğŸ—" },
          { name: "Gobi Madras Pepper Fry", price: 140, icon: "ğŸ—" },
          { name: "Baby Corn Madras Pepper Fry", price: 180, icon: "ğŸ—" },
          { name: "Paneer Madras Pepper Fry", price: 180, icon: "ğŸ—" },
          { name: "Mushroom Guizhou Pepper", price: 160, icon: "ğŸ—" },
          { name: "Gobi Guizhou Pepper", price: 140, icon: "ğŸ—" },
          { name: "Baby Corn Guizhou Pepper", price: 180, icon: "ğŸ—" },
          { name: "Paneer Guizhou Pepper", price: 180, icon: "ğŸ—" },
        ],

        Chicken_Starters: [
          { name: "Chilly Chicken", price: 180, icon: "ğŸ—" },
          { name: "Dragon Chicken", price: 220, icon: "ğŸ—" },
          { name: "Lee Fu Chicken", price: 220, icon: "ğŸ—" },
          { name: "Gongbao Chicken", price: 200, icon: "ğŸ—" },
          { name: "General Tsos Chicken", price: 220, icon: "ğŸ—" },
          { name: "Hunan Chicken", price: 220, icon: "ğŸ—" },
          { name: "Hydrebadi 65", price: 190, icon: "ğŸ—" },
          { name: "Chicken 65", price: 160, icon: "ğŸ—" },
          { name: "Don Bok Chicken", price: 220, icon: "ğŸ—" },
          { name: "Chicken Sweet Chilli", price: 220, icon: "ğŸ—" },
          { name: "Chicken And Broccoli", price: 240, icon: "ğŸ—" },
          { name: "Devil Chicken", price: 200, icon: "ğŸ—" },
          { name: "Hot Pepper Chicken", price: 220, icon: "ğŸ—" },
          { name: "555 Wings", price: 199, icon: "ğŸ—" },
          { name: "Drumsticks Chicken", price: 199, icon: "ğŸ—" },
          { name: "Kung Pao Chicken", price: 220, icon: "ğŸ—" },
        ],

        Seafood_Starters: [
          { name: "Honey Chilli Prawns", price: 260, icon: "ğŸ¤" },
          { name: "Garlic Prawns", price: 260, icon: "ğŸ¤" },
          { name: "Black Pepper Fish", price: 260, icon: "ğŸŸ" },
          { name: "Chilly Prawns", price: 250, icon: "ğŸ¤" },
          { name: "Fish In Oyster Sauce", price: 240, icon: "ğŸŸ" },
          { name: "Basil Prawns", price: 260, icon: "ğŸ¤" },
          { name: "Kentucky Fish", price: 240, icon: "ğŸŸ" },
          { name: "Kentucky Prawn", price: 250, icon: "ğŸ¤" },
          { name: "Garlic Squid", price: 260, icon: "ğŸ¦‘" },
          { name: "Lemon Pepper Prawn", price: 240, icon: "ğŸ¤" },
          { name: "Calamari Fritters", price: 260, icon: "ğŸ¦‘" },
          { name: "Prawn Salt and Pepper", price: 240, icon: "ğŸ¤" },
          { name: "Honey Sesame Prawns", price: 260, icon: "ğŸ¤" },
          { name: "Apollo Fish", price: 240, icon: "ğŸŸ" },
          { name: "Prawn And Broccoli", price: 260, icon: "ğŸ¤" },
          { name: "Lemon Basil Prawn", price: 260, icon: "ğŸ¤" },
          { name: "Hunan Fish", price: 260, icon: "ğŸŸ" },
        ],

        Bamboo_Specials: [
          { name: "Chicken Parmigiana With Fries", price: 240, icon: "ğŸ²" },
          { name: "Japan Chicken", price: 220, icon: "ğŸ²" },
          { name: "Dynamite Chicken", price: 220, icon: "ğŸ²" },
          { name: "Butter Garlic Prawns", price: 260, icon: "ğŸ¤" },
          { name: "Dynamite Prawns", price: 260, icon: "ğŸ¤" },
          { name: "Prawn Beauzule", price: 260, icon: "ğŸ¤" },
        ],

        Thupka_Bowls: [
          { name: "Veg Thupka Bowl", price: 189, icon: "ğŸ²" },
          { name: "Chicken Thupka Bowl", price: 220, icon: "ğŸ²" },
          { name: "Seafood Thupka Bowl", price: 260, icon: "ğŸ²" },
          { name: "Ching Mai Chicken", price: 260, icon: "ğŸš" },
          { name: "Ching Mai Prawn", price: 290, icon: "ğŸš" },
        ],

        Continental_Fusion: [
          { name: "Newyork Chicken Sandwich", price: 160, icon: "ğŸ¥ª" },
          { name: "Crunchy Chicken Sandwich", price: 150, icon: "ğŸ¥ª" },
          { name: "Bon Bon Chicken Sandwich", price: 150, icon: "ğŸ¥ª" },
          { name: "Bon Bon Veg Sandwich", price: 90, icon: "ğŸ¥ª" },
          { name: "Cheese And Chilli Toast", price: 130, icon: "ğŸ" },
          { name: "Grilled Chicken Burger", price: 160, icon: "ğŸ”" },
          { name: "Mexican Double Cheese Burger", price: 180, icon: "ğŸ”" },
          { name: "Fiery Spicy Chicken Burger", price: 170, icon: "ğŸ”" },
          { name: "Fried Chicken Burger With Bbq Sauce", price: 160, icon: "ğŸ”" },
          { name: "Cheese And Mushrooms Hot Dog", price: 140, icon: "ğŸŒ­" },
          { name: "Cheese And Paneer", price: 140, icon: "ğŸŒ­" },
          { name: "Bon Bon Spl Foot Long", price: 170, icon: "ğŸŒ­" },
        ],

        pizza: [
          { name: "MARGHERITA CHEESE PIZZA (Small)", price: 130, icon: "ğŸ•" },
          { name: "MARGHERITA CHEESE PIZZA (Medium)", price: 230, icon: "ğŸ•" },
          { name: "CLASSIC VEG PIZZA (Small)", price: 150, icon: "ğŸ•" },
          { name: "CLASSIC VEG PIZZA (Medium)", price: 250, icon: "ğŸ•" },
          { name: "CLASSIC CHICKEN PIZZA (Small)", price: 180, icon: "ğŸ•" },
          { name: "CLASSIC CHICKEN PIZZA (Medium)", price: 280, icon: "ğŸ•" },
          { name: "BBQ CHICKEN PIZZA (Small)", price: 200, icon: "ğŸ•" },
          { name: "BBQ CHICKEN PIZZA (Medium)", price: 300, icon: "ğŸ•" },
          { name: "MEXICAN CHICKEN PIZZA (Small)", price: 200, icon: "ğŸ•" },
          { name: "MEXICAN CHICKEN PIZZA (Medium)", price: 300, icon: "ğŸ•" },
          { name: "BUFFALO CHICKEN PIZZA (Small)", price: 200, icon: "ğŸ•" },
          { name: "BUFFALO CHICKEN PIZZA (Medium)", price: 300, icon: "ğŸ•" },
        ],

        pasta: [
          { name: "Bon Bon Best Pasta Veg", price: 220, icon: "ğŸ" },
          { name: "Macroni Cheese", price: 220, icon: "ğŸ§€" },
          { name: "Penne In Spicy Tomato Olive", price: 240, icon: "ğŸ" },
          { name: "Penne Alfredo Veg", price: 240, icon: "ğŸ" },
          { name: "Bon Bon Best Pasta Chicken", price: 250, icon: "ğŸ" },
          { name: "Chicken Marsala Spaghetti", price: 250, icon: "ğŸ" },
          { name: "Penne Alfredo Chicken Pasta", price: 250, icon: "ğŸ" },
          { name: "Penne Tikka Masala Chicken", price: 260, icon: "ğŸ" },
        ],

        wings: [
          { name: "Fried Chicken", price: 199, icon: "ğŸ—" },
          { name: "Hot And Spicy", price: 190, icon: "ğŸŒ¶ï¸" },
          { name: "Cajun Spicy", price: 199, icon: "ğŸŒ¶ï¸" },
          { name: "Chilli Garlic", price: 199, icon: "ğŸŒ¶ï¸" },
          { name: "Barbeque Wings", price: 199, icon: "ğŸ–" },
          { name: "Peri Peri Wings", price: 199, icon: "ğŸŒ¶ï¸" },
        ],

        milkshakes: [
          { name: "Vanilla", price: 120, icon: "ğŸ¥¤" },
          { name: "Chocolate", price: 120, icon: "ğŸ«" },
          { name: "Butter Scotch", price: 130, icon: "ğŸ¥¤" },
          { name: "Four Berries", price: 160, icon: "ğŸ«" },
          { name: "Sachin Secret", price: 130, icon: "ğŸ¥¤" },
          { name: "Milo Power", price: 130, icon: "ğŸ¥¤" },
          { name: "Cold Coffee", price: 130, icon: "â˜•" },
          { name: "Honey Cake Shake", price: 130, icon: "ğŸ¯" },
          { name: "Peanut Butter Shake", price: 150, icon: "ğŸ¥œ" },
          { name: "Nutella Shake", price: 180, icon: "ğŸ«" },
          { name: "Lotus Biscoff", price: 260, icon: "ğŸª" },
        ],

        mojitos: [
          { name: "Virgin Mojito", price: 90, icon: "ğŸ¹" },
          { name: "Blueberry Mojito", price: 120, icon: "ğŸ«" },
          { name: "Berries Punch", price: 130, icon: "ğŸ«" },
          { name: "Mint Cooler", price: 60, icon: "ğŸŒ¿" },
        ],

        momos: [
          { name: "Steamed Veg Momos", price: 120, icon: "ğŸ¥Ÿ" },
          { name: "Fried Veg Momos", price: 130, icon: "ğŸ¥Ÿ" },
          { name: "Manchurian Veg Momos", price: 130, icon: "ğŸ¥Ÿ" },
          { name: "Japan Veg Momos", price: 120, icon: "ğŸ¥Ÿ" },
          { name: "Dynamite Veg Momos", price: 130, icon: "ğŸ¥Ÿ" },
          { name: "Hot Pepper Veg Momos", price: 130, icon: "ğŸŒ¶ï¸" },
        ],

        NonVeg_Momos: [
          { name: "Steamed Non-Veg Momos", price: 140, icon: "ğŸ¥Ÿ" },
          { name: "Fried Non-Veg Momos", price: 150, icon: "ğŸ¥Ÿ" },
          { name: "Manchurian Non-Veg Momos", price: 160, icon: "ğŸ¥Ÿ" },
          { name: "Japan Non-Veg Momos", price: 160, icon: "ğŸ¥Ÿ" },
          { name: "Dynamite Non-Veg Momos", price: 160, icon: "ğŸ¥Ÿ" },
          { name: "Hot Pepper Non-Veg Momos", price: 160, icon: "ğŸŒ¶ï¸" },
        ],

        Fried_Rice_And_Noodles: [
          { name: "Classic Veg", price: 130, icon: "ğŸš" },
          { name: "Classic Egg", price: 150, icon: "ğŸ³" },
          { name: "Classic Chicken", price: 160, icon: "ğŸ—" },
          { name: "Classic Seafood", price: 180, icon: "ğŸ¦" },
          { name: "Burnt Garlic Veg", price: 130, icon: "ğŸ§„" },
          { name: "Burnt Garlic Egg", price: 150, icon: "ğŸ§„ğŸ³" },
          { name: "Burnt Garlic Chicken", price: 160, icon: "ğŸ§„ğŸ—" },
          { name: "Burnt Garlic Seafood", price: 180, icon: "ğŸ§„ğŸ¦" },
          { name: "Thai Basil Veg", price: 130, icon: "ğŸŒ¿" },
          { name: "Thai Basil Egg", price: 150, icon: "ğŸŒ¿ğŸ³" },
          { name: "Thai Basil Chicken", price: 160, icon: "ğŸŒ¿ğŸ—" },
          { name: "Thai Basil Seafood", price: 180, icon: "ğŸŒ¿ğŸ¦" },
          { name: "Schezwan Veg", price: 130, icon: "ğŸŒ¶ï¸" },
          { name: "Schezwan Egg", price: 150, icon: "ğŸŒ¶ï¸ğŸ³" },
          { name: "Schezwan Chicken", price: 160, icon: "ğŸŒ¶ï¸ğŸ—" },
          { name: "Schezwan Seafood", price: 180, icon: "ğŸŒ¶ï¸ğŸ¦" },
          { name: "Pepper Corn Veg", price: 130, icon: "ğŸŒ½" },
          { name: "Pepper Corn Egg", price: 150, icon: "ğŸŒ½ğŸ³" },
          { name: "Pepper Corn Chicken", price: 160, icon: "ğŸŒ½ğŸ—" },
          { name: "Pepper Corn Seafood", price: 180, icon: "ğŸŒ½ğŸ¦" },
          { name: "Madras Masala Veg", price: 130, icon: "ğŸ›" },
          { name: "Madras Masala Egg", price: 150, icon: "ğŸ›ğŸ³" },
          { name: "Madras Masala Chicken", price: 160, icon: "ğŸ›ğŸ—" },
          { name: "Madras Masala Seafood", price: 180, icon: "ğŸ›ğŸ¦" },
          { name: "Lee Fu Veg", price: 130, icon: "ğŸœ" },
          { name: "Lee Fu Egg", price: 150, icon: "ğŸœğŸ³" },
          { name: "Lee Fu Chicken", price: 160, icon: "ğŸœğŸ—" },
          { name: "Lee Fu Seafood", price: 180, icon: "ğŸœğŸ¦" },
          { name: "555 Rice Veg", price: 130, icon: "ğŸš" },
          { name: "555 Rice Egg", price: 150, icon: "ğŸšğŸ³" },
          { name: "555 Rice Chicken", price: 160, icon: "ğŸšğŸ—" },
          { name: "555 Rice Seafood", price: 180, icon: "ğŸšğŸ¦" },
        ],
      };

      const cakesMenu = {
        freshCreamCakes: [
          { name: "Black Forest", pricePerKg: 650, icon: "ğŸ°" },
          { name: "White Forest", pricePerKg: 750, icon: "ğŸ°" },
          { name: "Butterscotch", pricePerKg: 800, icon: "ğŸ¯" },
          { name: "Caramel", pricePerKg: 800, icon: "ğŸ®" },
          { name: "Choco Truffle", pricePerKg: 950, icon: "ğŸ«", mustTry: true },
          { name: "Light Chocolate", pricePerKg: 750, icon: "ğŸ«" },
          { name: "Mocha Walnut", pricePerKg: 950, icon: "â˜•ğŸŒ°", mustTry: true },
          { name: "Vanilla Fresh Cream", pricePerKg: 550, icon: "ğŸ¦" },
          { name: "Strawberry", pricePerKg: 750, icon: "ğŸ“" },
          { name: "Blueberry", pricePerKg: 750, icon: "ğŸ«" },
          { name: "Blue Curacao", pricePerKg: 800, icon: "ğŸ’™" },
          { name: "Fig & Honey", pricePerKg: 800, icon: "ğŸ¯" },
          { name: "Vanilla Nougatine", pricePerKg: 800, icon: "ğŸ¦" },
          { name: "Tex Mex Choco Nuts", pricePerKg: 950, icon: "ğŸŒ°" },
          { name: "Choco Nutty Cracks", pricePerKg: 950, icon: "ğŸ«ğŸŒ°", mustTry: true },
          { name: "Blueberry Apple Gateaux", pricePerKg: 750, icon: "ğŸ«ğŸ" },
          { name: "Choco Root", pricePerKg: 750, icon: "ğŸ«" },
          { name: "Choco Symphony", pricePerKg: 800, icon: "ğŸ«" },
          { name: "Pineapple Gateaux", pricePerKg: 750, icon: "ğŸ" },
          { name: "Harlequin Berry", pricePerKg: 950, icon: "ğŸ“ğŸ«", mustTry: true },
          { name: "Choco Gulkandh", pricePerKg: 950, icon: "ğŸŒ¹ğŸ«" },
          { name: "Seasonal Fruit Gateaux", pricePerKg: 850, icon: "ğŸ‡ğŸŠ" },
          { name: "Black Currant", pricePerKg: 800, icon: "ğŸ«" },
        ],

        bonBonExoticFlavours: [
          { name: "Four Mousse Alaska", pricePerKg: 1000, icon: "ğŸ¨" },
          { name: "Rich Chocolate Mousse", pricePerKg: 900, icon: "ğŸ«" },
          { name: "Twin Chocolate Mousse", pricePerKg: 900, icon: "ğŸ«ğŸ«" },
          { name: "Red Velvet", pricePerKg: 1100, icon: "â¤ï¸ğŸ°", mustTry: true },
          { name: "Choco Galaxy", pricePerKg: 1200, icon: "ğŸŒŒğŸ«" },
          { name: "Hazelnut Gateaux", pricePerKg: 1200, icon: "ğŸŒ°" },
          { name: "Missipe Fudge", pricePerKg: 1500, icon: "ğŸ«", mustTry: true },
          { name: "Lychees & Peaches", pricePerKg: 1000, icon: "ğŸ‘" },
          { name: "Fruits and Nuts", pricePerKg: 1000, icon: "ğŸ‡ğŸŒ°" },
        ],

        dryCakes: [
          { name: "Banana Walnut", pricePerKg: 1000, icon: "ğŸŒğŸŒ°" },
          { name: "American Osborne", pricePerKg: 950, icon: "ğŸ‡ºğŸ‡¸ğŸ°", mustTry: true },
          { name: "Fudge Brownie", pricePerKg: 950, icon: "ğŸ«" },
          { name: "Brownie", pricePerKg: 900, icon: "ğŸ«" },
          { name: "Death by Chocolate", pricePerKg: 1000, icon: "ğŸ’€ğŸ«", mustTry: true },
          { name: "French Cake", pricePerKg: 1000, icon: "ğŸ‡«ğŸ‡·ğŸ°", mustTry: true },
          { name: "Dates & Walnuts", pricePerKg: 1000, icon: "ğŸŒ°" },
          { name: "Choco Osborne", pricePerKg: 1000, icon: "ğŸ«" },
        ],

        cheeseCakes: [
          { name: "Strawberry", pricePerKg: 900, icon: "ğŸ“" },
          { name: "Blueberry", pricePerKg: 900, icon: "ğŸ«" },
          { name: "Raspberry", pricePerKg: 900, icon: "ğŸ“" },
          { name: "Chocolate", pricePerKg: 900, icon: "ğŸ«" },
        ],

        extras: [
          { name: "Fondant Model", pricePerKg: 1100, icon: "ğŸ‚" },
          { name: "Photo Print", price: 250, icon: "ğŸ–¼ï¸" },
          { name: "Shape Cake Design", pricePerKg: 200, icon: "ğŸ“" },
          { name: "Eggless Charge", pricePerKg: 150, icon: "ğŸ¥šğŸš«" },
          { name: "Fruit Garnish", pricePerKg: 200, icon: "ğŸ‡ğŸ“" },
        ],

        cakePieces: [
          { name: "Black Forest Piece", price: 60, icon: "ğŸ°" },
          { name: "White Forest Piece", price: 60, icon: "ğŸ°" },
          { name: "Butter Scotch Piece", price: 60, icon: "ğŸ¯" },
          { name: "Red Velvet Piece", price: 75, icon: "â¤ï¸ğŸ°" },
          { name: "Brownie Piece", price: 75, icon: "ğŸ«" },
          { name: "Dead Pie Piece", price: 75, icon: "ğŸ’€ğŸ¥§" },
          { name: "Choco Fantasy Piece", price: 75, icon: "ğŸ«âœ¨" },
          { name: "Moose Cakes Piece", price: 60, icon: "ğŸ¨" },
          { name: "American Osborn Piece", price: 75, icon: "ğŸ‡ºğŸ‡¸ğŸ°" },
          { name: "Choco Osborn Piece", price: 75, icon: "ğŸ«ğŸ°" },
        ],

        cupCakes: [{ name: "Fantasy Cup Cake", price: 50, icon: "ğŸ§âœ¨" }],

        specialsWithIceCream: [
          { name: "Brownie with Ice Cream", price: 130, icon: "ğŸ«ğŸ¨" },
          { name: "Dead Pie with Ice Cream", price: 130, icon: "ğŸ’€ğŸ¥§ğŸ¨" },
          { name: "Fantasy with Ice Cream", price: 130, icon: "âœ¨ğŸ¨" },
        ],
      };

      let selectedItems = {};
      let currentCategory = "all";
      let currentCakeCategory = "all";
      let currentMenuType = "food";

      // Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyDY3XhrG-2Cj9y2QvW0RB9afjnW1k-NL6E",
        authDomain: "bamboo-15c88.firebaseapp.com",
        projectId: "bamboo-15c88",
        storageBucket: "bamboo-15c88.firebasestorage.app",
        messagingSenderId: "491968003258",
        appId: "1:491968003258:web:903605a044306b45745683",
        measurementId: "G-B99VR1M772",
      };
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();

      // NEW: Unified orders collection
      const unifiedOrdersCollection = db.collection("unified_orders");

      // Make updateQuantity globally available
      window.updateQuantity = function (itemName, price, change, weight = null, itemType = 'food') {
        const itemKey = weight ? `${itemName} (${weight}kg)` : itemName;
        const finalPrice = weight ? price * weight : price;

        if (!selectedItems[itemKey]) {
          selectedItems[itemKey] = { 
            qty: 0, 
            price: finalPrice, 
            itemType: itemType,
            unitPrice: price,
            weight: weight || null
          };
        }

        selectedItems[itemKey].qty += change;

        if (selectedItems[itemKey].qty <= 0) {
          delete selectedItems[itemKey];
        }

        renderCurrentMenu();
        renderOrderSummary();
      };

      window.updateCakeQuantity = function (itemName, pricePerKg, weight, change) {
        updateQuantity(itemName, pricePerKg, change, weight, 'cake');
      };

      $(document).ready(function () {
        renderCurrentMenu();

        // Menu type switching
        $(".menu-type-btn").click(function () {
          $(".menu-type-btn").removeClass("active");
          $(this).addClass("active");
          currentMenuType = $(this).data("menu");

          if (currentMenuType === "food") {
            $("#foodMenuSection").show();
            $("#cakeMenuSection").hide();
          } else {
            $("#foodMenuSection").hide();
            $("#cakeMenuSection").show();
          }

          renderCurrentMenu();
        });

        // Food category tab switching
        $(".food-category").click(function () {
          $(".food-category").removeClass("active");
          $(this).addClass("active");
          currentCategory = $(this).data("category");
          renderFoodMenu();
        });

        // Cake category tab switching
        $(".cake-category").click(function () {
          $(".cake-category").removeClass("active");
          $(this).addClass("active");
          currentCakeCategory = $(this).data("cake-category");
          renderCakeMenu();
        });

        // Search functionality
        $("#searchInput").on("input", function () {
          const searchTerm = $(this).val().toLowerCase();
          filterMenuItems(searchTerm, "food");
        });

        $("#cakeSearchInput").on("input", function () {
          const searchTerm = $(this).val().toLowerCase();
          filterMenuItems(searchTerm, "cake");
        });

        // Submit unified order
        $("#submitOrder")
          .off("click")
          .on("click", async function () {
            const customerName = $("#customerName").val().trim();
            const customerPhone = $("#customerPhone").val().trim();
            const tableNo = $("#tableSelect").val();

            // Validation
            if (!customerName) {
              alert("âš ï¸ Please enter customer name!");
              return;
            }
            if (!tableNo) {
              alert("âš ï¸ Please select a table!");
              return;
            }
            if (Object.keys(selectedItems).length === 0) {
              alert("âš ï¸ Please add at least one item to the order!");
              return;
            }

            const btn = $(this);
            const originalText = btn.html();
            btn.html('<i class="bi bi-hourglass-split me-2"></i>Processing...');
            btn.prop("disabled", true);

            const orderId = Date.now();
            
            // Separate items by type
            const foodItems = {};
            const cakeItems = {};
            let foodTotal = 0;
            let cakeTotal = 0;

            Object.entries(selectedItems).forEach(([itemName, itemData]) => {
              const itemTotal = itemData.qty * itemData.price;
              
              if (itemData.itemType === 'cake') {
                cakeItems[itemName] = itemData;
                cakeTotal += itemTotal;
              } else {
                foodItems[itemName] = itemData;
                foodTotal += itemTotal;
              }
            });

            const unifiedOrderData = {
              id: orderId,
              customerName: customerName,
              customerPhone: customerPhone,
              tableNumber: tableNo,
              
              // Combined order data
              allItems: selectedItems,
              totalAmount: calculateTotal(),
              
              // Separated data for kitchen/counter processing
              foodItems: foodItems,
              cakeItems: cakeItems,
              foodTotal: foodTotal,
              cakeTotal: cakeTotal,
              
              // Status tracking
              status: "pending",
              foodStatus: Object.keys(foodItems).length > 0 ? "pending" : "not_applicable",
              cakeStatus: Object.keys(cakeItems).length > 0 ? "pending" : "not_applicable",
              
              // Timestamps
              createdAt: firebase.firestore.FieldValue.serverTimestamp(),
              waiterSubmitted: new Date().toLocaleTimeString(),
              
              // Payment tracking
              paid: false,
              paidAt: null,
              paymentMethod: null,
              
              // Billing status
              billGenerated: false
            };

            try {
              // Save unified order to Firestore
              await unifiedOrdersCollection.add(unifiedOrderData);
              
              // Simulate processing
              setTimeout(() => {
                selectedItems = {};
                renderOrderSummary();
                $("#customerName").val("");
                $("#customerPhone").val("");
                $("#tableSelect").val("");
                showOrderSuccessToast(customerName, tableNo, orderId);
                btn.html(originalText);
                btn.prop("disabled", true);
              }, 1000);
            } catch (err) {
              alert("Failed to submit order: " + err.message);
              btn.html(originalText);
              btn.prop("disabled", false);
            }
          });
      });

      function renderCurrentMenu() {
        if (currentMenuType === "food") {
          renderFoodMenu();
        } else {
          renderCakeMenu();
        }
      }

      function renderFoodMenu() {
        const grid = $("#foodMenuGrid");
        grid.empty();

        const categoriesToShow =
          currentCategory === "all" ? Object.keys(menu) : [currentCategory];

        categoriesToShow.forEach((category) => {
          if (menu[category]) {
            menu[category].forEach((item) => {
              const itemCard = createFoodItemCard(item, category);
              grid.append(itemCard);
            });
          }
        });
      }

      function renderCakeMenu() {
        const grid = $("#cakeMenuGrid");
        grid.empty();

        const categoriesToShow =
          currentCakeCategory === "all"
            ? Object.keys(cakesMenu)
            : [currentCakeCategory];

        categoriesToShow.forEach((category) => {
          if (cakesMenu[category]) {
            cakesMenu[category].forEach((item) => {
              const itemCard = createCakeItemCard(item, category);
              grid.append(itemCard);
            });
          }
        });
      }

      function createFoodItemCard(item, category) {
        const quantity = selectedItems[item.name]?.qty || 0;

        return `
          <div class="food-item-card food-item" data-name="${item.name}" data-category="${category}">
            <div class="item-header">
              <div class="item-info">
                <div class="item-name">
                  ${item.icon} ${item.name}
                </div>
                <div class="item-price">â‚¹${item.price}</div>
              </div>
            </div>
            <div class="item-controls">
              <button class="qty-btn" onclick="updateQuantity('${item.name}', ${item.price}, -1, null, 'food')" ${quantity <= 0 ? "disabled" : ""}>
                <i class="bi bi-dash"></i>
              </button>
              <div class="qty-display">${quantity}</div>
              <button class="qty-btn" onclick="updateQuantity('${item.name}', ${item.price}, 1, null, 'food')">
                <i class="bi bi-plus"></i>
              </button>
            </div>
          </div>
        `;
      }

      function createCakeItemCard(item, category) {
        const priceText = item.pricePerKg
          ? `â‚¹${item.pricePerKg}/kg`
          : `â‚¹${item.price}`;
        const mustTryBadge = item.mustTry
          ? '<span class="badge bg-warning text-dark ms-2">Must Try!</span>'
          : "";

        return `
          <div class="food-item-card cake-item" data-name="${item.name}" data-category="${category}">
            <div class="item-header">
              <div class="item-info">
                <div class="item-name">
                  ${item.icon} ${item.name} ${mustTryBadge}
                </div>
                <div class="item-price">${priceText}</div>
              </div>
            </div>
            ${item.pricePerKg ? createWeightSelector(item) : createSimpleControls(item)}
            ${item.pricePerKg ? createCakeOrderedItems(item.name) : ""}
          </div>
        `;
      }

      function createWeightSelector(item) {
        return `
          <div class="weight-selector">
            <small class="text-muted mb-2 d-block">Select weight:</small>
            <div class="weight-option">
              <input type="radio" name="weight_${item.name.replace(/\s+/g, "_")}" value="0.5" id="weight_05_${item.name.replace(/\s+/g, "_")}">
              <label for="weight_05_${item.name.replace(/\s+/g, "_")}">0.5 kg - â‚¹${item.pricePerKg * 0.5}</label>
            </div>
            <div class="weight-option">
              <input type="radio" name="weight_${item.name.replace(/\s+/g, "_")}" value="1" id="weight_1_${item.name.replace(/\s+/g, "_")}" checked>
              <label for="weight_1_${item.name.replace(/\s+/g, "_")}">1 kg - â‚¹${item.pricePerKg}</label>
            </div>
            <div class="weight-option">
              <input type="radio" name="weight_${item.name.replace(/\s+/g, "_")}" value="1.5" id="weight_15_${item.name.replace(/\s+/g, "_")}">
              <label for="weight_15_${item.name.replace(/\s+/g, "_")}">1.5 kg - â‚¹${item.pricePerKg * 1.5}</label>
            </div>
            <div class="weight-option">
              <input type="radio" name="weight_${item.name.replace(/\s+/g, "_")}" value="2" id="weight_2_${item.name.replace(/\s+/g, "_")}">
              <label for="weight_2_${item.name.replace(/\s+/g, "_")}">2 kg - â‚¹${item.pricePerKg * 2}</label>
            </div>
          </div>
          <div class="item-controls cake-add-controls">
            <button class="cake-add-btn" onclick="addCakeToOrder('${item.name}', ${item.pricePerKg}, '${item.name.replace(/\s+/g, "_")}')">
              <i class="bi bi-plus-circle me-2"></i>Add to Order
            </button>
          </div>
        `;
      }

      function createCakeOrderedItems(itemName) {
        const orderedItems = Object.keys(selectedItems).filter((key) =>
          key.startsWith(itemName + " (")
        );

        if (orderedItems.length === 0) {
          return "";
        }

        let orderedHtml =
          '<div class="cake-ordered-items"><small class="text-muted mb-2 d-block">In your order:</small>';

        orderedItems.forEach((itemKey) => {
          const item = selectedItems[itemKey];
          const weightMatch = itemKey.match(/\((.+?)kg\)/);
          const weight = weightMatch ? weightMatch[1] : "";

          orderedHtml += `
            <div class="ordered-item-row">
              <span class="ordered-item-text">${weight}kg Ã— ${item.qty}</span>
              <div class="ordered-item-controls">
                <button class="ordered-qty-btn" onclick="removeCakeFromOrder('${itemKey}')">
                  <i class="bi bi-dash"></i>
                </button>
                <span class="ordered-qty">${item.qty}</span>
                <button class="ordered-qty-btn" onclick="addMoreCakeToOrder('${itemKey}', ${item.price / (item.qty || 1)})">
                  <i class="bi bi-plus"></i>
                </button>
              </div>
            </div>
          `;
        });

        orderedHtml += "</div>";
        return orderedHtml;
      }

      window.addCakeToOrder = function (itemName, pricePerKg, itemId) {
        const selectedWeight = $(`input[name="weight_${itemId}"]:checked`).val();
        if (!selectedWeight) {
          alert("Please select a weight first!");
          return;
        }

        const weight = parseFloat(selectedWeight);
        updateCakeQuantity(itemName, pricePerKg, weight, 1);

        // Reset radio buttons
        $(`input[name="weight_${itemId}"]`).prop("checked", false);
        $(`#weight_1_${itemId}`).prop("checked", true);

        renderCakeMenu();
      };

      window.removeCakeFromOrder = function (itemKey) {
        if (selectedItems[itemKey]) {
          selectedItems[itemKey].qty -= 1;
          if (selectedItems[itemKey].qty <= 0) {
            delete selectedItems[itemKey];
          }
        }
        renderCakeMenu();
        renderOrderSummary();
      };

      window.addMoreCakeToOrder = function (itemKey, price) {
        if (!selectedItems[itemKey]) {
          selectedItems[itemKey] = { qty: 0, price: price, itemType: 'cake' };
        }
        selectedItems[itemKey].qty += 1;
        renderCakeMenu();
        renderOrderSummary();
      };

      function createSimpleControls(item) {
        const quantity = selectedItems[item.name]?.qty || 0;

        return `
          <div class="item-controls">
            <button class="qty-btn" onclick="updateQuantity('${item.name}', ${item.price}, -1, null, 'cake')" ${quantity <= 0 ? "disabled" : ""}>
              <i class="bi bi-dash"></i>
            </button>
            <div class="qty-display">${quantity}</div>
            <button class="qty-btn" onclick="updateQuantity('${item.name}', ${item.price}, 1, null, 'cake')">
              <i class="bi bi-plus"></i>
            </button>
          </div>
        `;
      }

      function renderOrderSummary() {
        const container = $("#orderItems");
        const submitBtn = $("#submitOrder");

        if (Object.keys(selectedItems).length === 0) {
          container.html(`
            <div class="empty-cart">
              <div class="empty-cart-icon">ğŸ›’</div>
              <p>No items added yet</p>
              <small>Start adding items to create an order</small>
            </div>
          `);
          submitBtn.prop("disabled", true);
          return;
        }

        let itemsHtml = "";
        let foodCount = 0;
        let cakeCount = 0;

        Object.entries(selectedItems).forEach(([name, { qty, price, itemType }]) => {
          const typeClass = itemType === 'cake' ? 'cake-type' : '';
          const typeLabel = itemType === 'cake' ? 'Cake' : 'Food';
          
          if (itemType === 'cake') cakeCount++;
          else foodCount++;

          itemsHtml += `
            <div class="order-item">
              <span class="order-item-name">
                ${name}
                <span class="order-type-display ${typeClass}">${typeLabel}</span>
              </span>
              <span class="order-item-qty">Ã—${qty}</span>
              <span class="order-item-price">â‚¹${qty * price}</span>
            </div>
          `;
        });

        const total = calculateTotal();

        container.html(`
          ${itemsHtml}
          <div class="order-total">
            Total: â‚¹${total}
            <br><small>Food items: ${foodCount} | Cake items: ${cakeCount}</small>
          </div>
        `);

        submitBtn.prop("disabled", false);
      }

      function calculateTotal() {
        return Object.values(selectedItems).reduce(
          (total, { qty, price }) => total + qty * price,
          0
        );
      }

      function filterMenuItems(searchTerm, menuType) {
        const selector =
          menuType === "food"
            ? "#foodMenuGrid .food-item-card"
            : "#cakeMenuGrid .food-item-card";

        $(selector).each(function () {
          const itemName = $(this).data("name").toLowerCase();
          if (itemName.includes(searchTerm)) {
            $(this).show().addClass("animate__fadeIn");
          } else {
            $(this).hide();
          }
        });
      }

      // Add interactive animations
      $(document)
        .on("mouseenter", ".food-item-card", function () {
          $(this).addClass("animate__pulse");
        })
        .on("mouseleave", ".food-item-card", function () {
          $(this).removeClass("animate__pulse");
        });

      // Clear search on Escape key
      $(document).keydown(function (e) {
        if (e.keyCode === 27) {
          $("#searchInput").val("").trigger("input");
          $("#cakeSearchInput").val("").trigger("input");
        }
      });

      // Enhanced success toast with order details
      function showOrderSuccessToast(customerName, tableNo, orderId) {
        $(".custom-toast").remove();

        const customToast = $(`
          <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
            <div class="toast align-items-center text-white bg-success border-0 custom-toast" role="alert">
              <div class="d-flex">
                <div class="toast-body">
                  <i class="bi bi-check-circle-fill me-2"></i>
                  <strong>Order #${orderId.toString().slice(-4)} submitted!</strong><br>
                  <small>${customerName} â€¢ Table ${tableNo} â€¢ Sent to kitchen & counter â€¢ ${new Date().toLocaleTimeString()}</small>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
              </div>
            </div>
          </div>
        `);

        $("body").append(customToast);
        const toast = new bootstrap.Toast(customToast.find(".toast"));
        toast.show();

        customToast.find(".toast").on("hidden.bs.toast", function () {
          customToast.remove();
        });
      }

      // Customer name validation
      $("#customerName").on("input", function() {
        const name = $(this).val().trim();
        if (name.length > 0) {
          $(this).removeClass("is-invalid").addClass("is-valid");
        } else {
          $(this).removeClass("is-valid").addClass("is-invalid");
        }
      });

      // Phone validation
      $("#customerPhone").on("input", function() {
        const phone = $(this).val().trim();
        const phoneRegex = /^[6-9]\d{9}$/;
        if (phoneRegex.test(phone)) {
          $(this).removeClass("is-invalid").addClass("is-valid");
        } else if (phone.length > 0) {
          $(this).removeClass("is-valid").addClass("is-invalid");
        } else {
          $(this).removeClass("is-valid is-invalid");
        }
      });
    </script>
  </body>
</html>
